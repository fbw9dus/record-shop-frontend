(this["webpackJsonprecord-shop-frontend"]=this["webpackJsonprecord-shop-frontend"]||[]).push([[0],{118:function(e,t,a){},206:function(e,t,a){e.exports=a(341)},212:function(e,t,a){},222:function(e,t){},224:function(e,t){},236:function(e,t){},238:function(e,t){},264:function(e,t){},266:function(e,t){},267:function(e,t){},273:function(e,t){},275:function(e,t){},293:function(e,t){},296:function(e,t){},312:function(e,t){},315:function(e,t){},34:function(e,t,a){e.exports=a.p+"static/media/gif.aa941076.gif"},341:function(e,t,a){"use strict";a.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=a(0),n=a.n(r),l=a(17),c=a.n(l),s=a(12),i=a(382),o=(a(211),a(212),a(48)),u=(a(118),a(381)),m=a(376),d=a(188),p=a(15),E=a(4),h=a(23),b=a.n(h),g=a(38),f=a(10),v=a(30),k=a(373),N=a(179),w=a(388),O=a(384),j=a(375),x=a(196),y={items:[],total:0,records:0,shippingFee:0,weight:0,vat:0};function S(e){return{basketActions:{add:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e({type:"b/add",product:t,count:a})},delete:function(t){return e({type:"b/delete",index:t})},increment:function(t){return e({type:"b/increment",index:t})},decrement:function(t){return e({type:"b/decrement",index:t})},clear:function(){return e({type:"b/clear"})},authRequired:function(){return e({type:"b/authRequired"})},returnToBasket:function(){return e({type:"b/returnToBasket"})}}}}var A=Object(v.b)((function(e){return{basket:e.basket}}),S),C=a(181),P=a.n(C),T=function(e){return function(e){var t=P.a.createHash("sha512");return t.update(e),t.digest("hex")}(e+"!record-shop")},R=a(89),B=a.n(R);window.Axios=B.a;var F={verified:!1,user:!1,token:null};var M=Object(v.b)((function(e){return{auth:e.auth}}),(function(e){return{authActions:{success:function(t,a,r){return e({type:"auth:login:success",user:t,token:a,remember:r})},logout:function(){return e({type:"auth:logout"})}}}})),_=M((function(e){var t=e.auth,a=(e.authActions,e.children);return t&&t.user&&t.user.role&&"Admin"===t.user.role?a:null})),I=(M((function(e){var t=e.auth,a=(e.authActions,e.children),r=e.group;return t&&t.user&&t.user.role&&t.user.role===r?a:null})),M((function(e){var t=e.auth,a=e.children;return t&&t.user&&t.verified?a:null}))),V=M((function(e){var t=e.auth,a=(e.authActions,e.children);e.group;return t&&t.user&&t.verified?null:a})),q=M((function(e){var t=e.authActions.success,a=n.a.useState(!1),r=Object(f.a)(a,2),l=r[0],c=r[1];if(!l){c(!0);var s=localStorage.getItem("record-shop-auth-data")||sessionStorage.getItem("record-shop-auth-data");if(s){var i=JSON.parse(s),o=i.user,u=i.token;i.verified,i.remember;B.a.get("/users/".concat(o.id),{headers:{"x-auth":u}}).then((function(e){200===e.status?t(e.data,u,!0):localStorage.removeItem("record-shop-auth-data")}))}}return null})),D=M((function(e){var t=e.authActions,a=Object(o.g)();return t.logout(),a.push("/"),null})),z=M((function(e){return e.auth&&"Admin"===e.auth.user.role?n.a.createElement(o.b,e):null})),L=M((function(e){return console.log(e.auth),e.auth&&e.auth.verified?n.a.createElement(o.b,e):null})),U=a(370),K=Object(U.a)((function(e){return{paper:{padding:e.spacing(1)},input:{width:"100%"},wrapper:{padding:e.spacing(1)},error:{padding:e.spacing(1),background:"red"}}})),Z=M((function(e){var t=Object(o.g)(),a=K(),r=Object(v.c)(),l=Object(v.d)((function(e){return e.basket.authRequired})),c=S(r).basketActions,i=n.a.useState(!1),u=Object(f.a)(i,2),m=u[0],d=u[1],h=n.a.useState(!1),x=Object(f.a)(h,2),y=x[0],A=x[1],C=n.a.useState({email:"",password:"",remember:!1}),P=Object(f.a)(C,2),T=P[0],R=P[1],B=function(){var a=Object(g.a)(b.a.mark((function a(r){var n,s,i;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,window.Axios.post("/users/login",{email:T.email,password:T.password});case 3:if(n=a.sent,s=n.headers["x-auth"]){a.next=7;break}throw new Error("login failed");case 7:i=n.data,e.authActions.success(i,s,T.remember),l?(c.returnToBasket(),t.push("/basket")):t.push("/"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),A(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}(),F=function(e){return R(Object(E.a)(Object(E.a)({},T),{},Object(p.a)({},e.target.name,e.target.value)))};return n.a.createElement("div",{className:a.wrapper},n.a.createElement(k.a,{className:a.paper},l?n.a.createElement(k.a,{className:a.error},"Um ihre Bestellung abschlie\xdfen zu k\xf6nnen..."):null,y?n.a.createElement(k.a,{className:a.error},y.toString()):null,n.a.createElement(N.a,{label:"eMail",className:a.input,name:"email",value:T.email,onChange:F}),n.a.createElement(N.a,{label:"Passwort",className:a.input,type:m?"text":"password",name:"password",value:T.password,onChange:F}),n.a.createElement(w.a,{control:n.a.createElement(O.a,{checked:T.remember,onChange:function(e){return R(Object(E.a)(Object(E.a)({},T),{},{remember:!T.remember}))}}),label:"Angemeldet bleiben"}),n.a.createElement(w.a,{control:n.a.createElement(O.a,{checked:m,onChange:function(e){return d(!m)}}),label:"Passwort Zeigen"}),n.a.createElement("br",null),n.a.createElement(j.a,{style:{float:"right"},variant:"contained",color:"primary",onClick:B},"Anmelden"),n.a.createElement("br",null),"Noch kein Kunde? ",n.a.createElement(s.b,{to:"/register"},"Registrieren!"),n.a.createElement("br",null),"Passwort vergessen? ",n.a.createElement(s.b,{to:"/reset"},"Anfordern!")))})),H=a(25),J=function(){var e=Object(o.g)(),t=K(),a=Object(v.d)((function(e){return e.basket.authRequired})),r=n.a.useState(!1),l=Object(f.a)(r,2),c=l[0],i=l[1],u=n.a.useState(!1),m=Object(f.a)(u,2),d=m[0],h=m[1],N=n.a.useState(!1),x=Object(f.a)(N,2),y=x[0],S=x[1],A=n.a.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",street:"",city:""}),C=Object(f.a)(A,2),P=C[0],T=C[1],R=P.firstName,B=P.lastName,F=P.email,M=P.password,_=P.confirmPassword,I=P.street,V=P.city;H.ValidatorForm.addValidationRule("isPasswordMatch",(function(e){return M===_}));var q=function(e){switch(T(Object(E.a)(Object(E.a)({},P),{},Object(p.a)({},e.target.name,e.target.value))),e.target.name){case"password":S(e.target.value===_);break;case"confirmPassword":S(M===e.target.value);break;default:S(M===_)}},D=function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,window.Axios.post("/users/",{firstName:R,lastName:B,email:F,password:P.password,address:{street:I,city:V}});case 4:200===t.sent.status?e.push("/"):h(new Error("Benutzer Existiert")),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("@",t.t0),h(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return n.a.createElement("div",{className:t.wrapper},n.a.createElement(k.a,{className:t.paper},n.a.createElement(H.ValidatorForm,{onSubmit:D,onError:function(e){return console.log(e)}},a?n.a.createElement(k.a,{className:t.error},"Um ihre Bestellung abschlie\xdfen zu k\xf6nnen..."):null,d?n.a.createElement(k.a,{className:t.error},d.toString()):null,n.a.createElement(H.TextValidator,{label:"eMail",className:t.input,name:"email",value:P.email,onChange:q,validators:["required","isEmail"],errorMessages:["this field is required","email is not valid"]}),n.a.createElement(H.TextValidator,{label:"Vorname",className:t.input,name:"firstName",value:P.firstName,onChange:q,validators:["required"],errorMessages:["this field is required"]}),n.a.createElement(H.TextValidator,{label:"Nachname",className:t.input,name:"lastName",value:P.lastName,onChange:q,validators:["required"],errorMessages:["this field is required"]}),n.a.createElement(H.TextValidator,{label:"Strasse, Nr.",className:t.input,name:"street",value:P.street,onChange:q}),n.a.createElement(H.TextValidator,{label:"PLZ, Ort",className:t.input,name:"city",value:P.city,onChange:q}),n.a.createElement(H.TextValidator,{label:"Passwort",className:t.input,type:c?"text":"password",name:"password",value:P.password,onChange:q,validators:["required","matchRegexp:^[a-zA-Z0-9.!?:@ ]{10,64}$"],errorMessages:["this field is required","mindestens 10 zeichen, zahlen, grossbuchstaben, sonderzeichen"]}),n.a.createElement(H.TextValidator,{label:"Passwort Best\xe4tigen",className:t.input,type:c?"text":"password",name:"confirmPassword",value:P.confirmPassword,onChange:q,validators:["isPasswordMatch"],errorMessages:["Passw\xf6rter stimmen nicht \xfcberein"]}),n.a.createElement(w.a,{control:n.a.createElement(O.a,{checked:c,onChange:function(e){return i(!c)}}),label:"Passwort Zeigen"}),n.a.createElement("br",null),n.a.createElement(j.a,{disabled:!y,style:{float:"right"},variant:"contained",color:"primary",type:"submit"},"Registrieren"),n.a.createElement("br",null),"Schon Kunde? ",n.a.createElement(s.b,{to:"/login"},"Hier Anmelden"),n.a.createElement("br",null),"Passwort vergessen? ",n.a.createElement(s.b,{to:"/reset"},"Anfordern!"))))},W=a(385),X=a(387),$=a(198),G=a(386),Q=a(377),Y=a(378),ee=a(379),te=a(189);var ae=function(e){var t=e.fieldNames,a=e.sortFields,r=e.restPath,l=e.renderListItem,c=n.a.useState(!1),s=Object(f.a)(c,2),i=s[0],o=s[1],u=n.a.useState(!1),p=Object(f.a)(u,2),h=p[0],b=p[1],g=n.a.useState({sortField:"id",sortOrder:1,pageNumber:0,recordsPerPage:4,search:"",searchField:t[0]}),v=Object(f.a)(g,2),k=v[0],N=v[1];i||window.Axios.get("".concat(r,"?pageNumber=").concat(k.pageNumber,"&")+"recordsPerPage=".concat(k.recordsPerPage,"&")+"sortField=".concat(k.sortField,"&")+"sortOrder=".concat(k.sortOrder,"&")+"searchField=".concat(k.searchField,"&")+"search=".concat(k.search),{headers:{"x-auth":window.AUTH_TOKEN}}).then((function(e){var t=e.data,a=t.list,r=t.count;o(!0),b(a),N(Object(E.a)(Object(E.a)({},k),{},{numberOfRecords:r}))}));var w=-1===k.recordsPerPage?1:Math.floor(k.numberOfRecords/k.recordsPerPage);function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){var a=Math.min(w-1,Math.max(0,e));N(Object(E.a)(Object(E.a)({},k),{},{pageNumber:a})),o(!1)}}function j(e){return function(t){N(Object(E.a)(Object(E.a)({},k),{},{recordsPerPage:e,pageNumber:0})),o(!1)}}return h?n.a.createElement(n.a.Fragment,null,n.a.createElement(m.a,{className:"m-2"},n.a.createElement(d.a,{xs:12,className:"d-flex justify-content-center "},n.a.createElement(Q.a,null,n.a.createElement(Y.a,{style:{marginRight:"1ch"}},n.a.createElement(G.a,{onClick:O(0)},"<<"),n.a.createElement(G.a,{onClick:O(k.pageNumber-1)},"<"),n.a.createElement(G.a,{className:"btn"},n.a.createElement("b",null,k.pageNumber+1," of ",w)),n.a.createElement(G.a,{onClick:O(k.pageNumber+1)},">"),n.a.createElement(G.a,{onClick:O(w)},">>")),n.a.createElement(Y.a,null,[4,8,25,50,100].map((function(e){return n.a.createElement(G.a,{onClick:j(e)},e)})),n.a.createElement(G.a,{onClick:j(-1)},"\u221e"))))),n.a.createElement(m.a,{className:"m-2"},n.a.createElement(d.a,{xs:12,className:"d-flex justify-content-center "},n.a.createElement(Y.a,null,a.map((function(e){return n.a.createElement(G.a,{onClick:(t=e,function(e){k.sortField!==t?N(Object(E.a)(Object(E.a)({},k),{},{sortField:t,sortOrder:1})):N(Object(E.a)(Object(E.a)({},k),{},{sortOrder:-1*k.sortOrder})),o(!1)})},e);var t}))))),n.a.createElement(m.a,{className:"m-2"},n.a.createElement(d.a,{xs:12,className:"d-flex justify-content-center "},n.a.createElement(ee.a,null,n.a.createElement(te.a,{name:"search",value:k.search,onChange:function(e){N(Object(E.a)(Object(E.a)({},k),{},{search:e.target.value})),o(!1)}})))),n.a.createElement(m.a,{className:"m-2"},n.a.createElement(d.a,{xs:12,className:"d-flex flex-wrap justify-content-center "},h.map(l)))):null},re=a(34),ne=a.n(re);var le=function(){var e=["title","artist","year","price"],t=e;return n.a.createElement(ae,{fieldNames:e,sortFields:t,restPath:"/records/",renderListItem:function(e){return n.a.createElement(W.a,{style:{width:"18rem"},key:e._id,className:"m-2 card-custom"},n.a.createElement(W.a.Img,{variant:"top",src:ne.a}),n.a.createElement(W.a.Body,null,n.a.createElement(W.a.Title,null,n.a.createElement("h2",{className:"title"},e.title))),n.a.createElement(X.a,{className:"list-group-flush"},n.a.createElement($.a,{className:"list-group-item list-group-item-dark list-group-item-action"},e.year),n.a.createElement($.a,{className:"list-group-item list-group-item-dark list-group-item-action"},e.artist),n.a.createElement($.a,{className:"list-group-item list-group-item-dark list-group-item-action"},e.price)),n.a.createElement(W.a.Body,null,n.a.createElement(s.b,{className:"d-flex align-items-center",to:"/admin/records/".concat(e._id)},n.a.createElement(G.a,{className:"btn btn-dark button-custom"},"EDIT ME"))))}})};var ce=M((function(e){var t,a=e.match,r=(e.auth.token,a.params.id),l=n.a.useState(!1),c=Object(f.a)(l,2),s=c[0],i=c[1],o=n.a.useState(!1),u=Object(f.a)(o,2),m=u[0],d=u[1];if(s||(i(!0),window.Axios.get("/records/".concat(r)).then((function(e){return d(e.data)}))),!m)return null;var h=function(e){return d(Object(E.a)(Object(E.a)({},m),{},Object(p.a)({},e.target.name,e.target.value)))};return n.a.createElement(W.a,{style:{width:"18rem"},key:m._id,className:"m-2 card-custom"},n.a.createElement(W.a.Img,{variant:"top",src:ne.a}),n.a.createElement(W.a.Body,null,n.a.createElement(W.a.Title,null,n.a.createElement("input",(t={className:"list-group-item list-group-item-dark",name:"title",value:m.title,onChange:h},Object(p.a)(t,"className","title"),Object(p.a)(t,"value",m.title),t)))),n.a.createElement(X.a,{className:"list-group-flush"},n.a.createElement("input",Object(p.a)({name:"year",value:m.year,onChange:h,className:" list-group-item-action"},"value",m.year)),n.a.createElement("input",Object(p.a)({name:"artist",value:m.artist,onChange:h,className:"list-group-item list-group-item-dark list-group-item-action"},"value",m.artist)),n.a.createElement("input",Object(p.a)({name:"price",value:m.price,onChange:h,className:"list-group-item list-group-item-dark list-group-item-action"},"value",m.price))),n.a.createElement(W.a.Body,null,n.a.createElement(G.a,{className:"btn btn-dark mr-3",onClick:function(e){e.preventDefault(),window.Axios.put("/records/".concat(r),m).then((function(e){return d(e.data)}))}},"SAVE  "),n.a.createElement(G.a,{className:"btn btn-danger",onClick:function(e){e.preventDefault(),window.confirm("Wirklich?!?!?")&&window.Axios.delete("/records/".concat(r)).then((function(e){return console.log("und hop")}))}},"REMOVE")))})),se=A((function(e){var t=e.basketActions,a=e.product,r=n.a.useState(1),l=Object(f.a)(r,2),c=l[0],s=l[1];return n.a.createElement(ee.a,{style:{width:"fit-content"}},n.a.createElement(G.a,{onClick:function(e){return t.add(a,c)}},"Add to Basket"),n.a.createElement(ee.a.Append,null,n.a.createElement(G.a,{variant:"warning",onClick:function(e){return s(Math.min(10,c+1))}},"+"),n.a.createElement(ee.a.Text,null,c),n.a.createElement(G.a,{variant:"warning",onClick:function(e){return s(Math.max(1,c-1))}},"-")))}));var ie=function(e){var t=e.match.params.id,a=n.a.useState(!1),r=Object(f.a)(a,2),l=r[0],c=r[1],s=n.a.useState(!1),i=Object(f.a)(s,2),o=i[0],u=i[1];return l||(c(!0),window.Axios.get("/records/".concat(t)).then((function(e){return u(e.data)}))),o?n.a.createElement(W.a,{style:{width:"18rem",left:"50%",transform:"translate(-50%)"},key:o._id,className:"m-2 card-custom"},n.a.createElement(W.a.Img,{variant:"top",src:o.img}),n.a.createElement(W.a.Body,null,n.a.createElement(W.a.Title,null,n.a.createElement("div",Object(p.a)({className:"list-group-item list-group-item-dark"},"className","title"),o.title))),n.a.createElement(X.a,{className:"list-group-flush"},n.a.createElement("div",{className:"list-group-item list-group-item-dark list-group-item-action"},o.year),n.a.createElement("div",{className:"list-group-item list-group-item-dark list-group-item-action"},o.artist),n.a.createElement("div",{className:"list-group-item list-group-item-dark list-group-item-action"},o.price,"\u20ac")),n.a.createElement(W.a.Body,{style:{display:"flex",justifyContent:"center"}},n.a.createElement(se,{product:o}))):null},oe=a(383);var ue=M((function(e){var t=e.match,a=(e.auth.token,t.params.id),r=n.a.useState(!1),l=Object(f.a)(r,2),c=l[0],s=l[1],i=n.a.useState(!1),o=Object(f.a)(i,2),u=o[0],m=o[1];if(c||(s(!0),window.Axios.get("/users/".concat(a)).then((function(e){return m(e.data)}))),!u)return null;var d=function(e){return m(Object(E.a)(Object(E.a)({},u),{},Object(p.a)({},e.target.name,e.target.value)))};return n.a.createElement("div",{className:"user-custom m-3"},n.a.createElement("ul",{className:"list-group"},n.a.createElement("span",{className:"list-group-item list-group-item-dark list-group-item-action list-custom "},"KILLER USER"),n.a.createElement("input",Object(p.a)({name:"firstName",value:u.firstName,onChange:d,className:"list-group-item list-group-item-dark list-group-item-action"},"value",u.firstName)),n.a.createElement("input",Object(p.a)({name:"lastName",value:u.lastName,onChange:d,className:"list-group-item list-group-item-dark list-group-item-action"},"value",u.lastName)),n.a.createElement("input",Object(p.a)({name:"fullName",value:u.fullName,onChange:d,className:"list-group-item list-group-item-dark list-group-item-action"},"value",u.fullName)),n.a.createElement("input",Object(p.a)({name:"email",value:u.email,onChange:d,className:"list-group-item list-group-item-dark list-group-item-action"},"value",u.email)),n.a.createElement(oe.a.Check,{className:"list-group-item list-group-item-dark list-group-item-action",type:"checkbox",label:"Admin",onChange:function(e){return m(Object(E.a)(Object(E.a)({},u),{},{role:e.target.checked?"Admin":"User"}))},checked:"Admin"===u.role})),n.a.createElement(G.a,{className:"btn btn-dark mr-2",onClick:function(e){e.preventDefault(),window.Axios.put("/users/".concat(a),u).then((function(e){return m(e.data)}))}},"SAVE  "),n.a.createElement(G.a,{className:"btn btn-danger",onClick:function(e){e.preventDefault(),window.confirm("Wirklich?!?!?")&&window.Axios.delete("/users/".concat(a)).then((function(e){return console.log("und hop")}))}},"REMOVE"))}));var me=function(){var e=["firstName","lastName","fullName","email"];return n.a.createElement(ae,{fieldNames:e,sortFields:["firstName","lastName","email","role"],restPath:"/users/",renderListItem:function(t){return n.a.createElement("div",{className:"user-custom m-3"},n.a.createElement("ul",{className:"list-group"},n.a.createElement("span",{className:"list-group-item list-group-item-dark list-group-item-action list-custom "},"KILLER USER"),e.map((function(e){return n.a.createElement("li",{className:"list-group-item list-group-item-dark list-group-item-action"},t[e])}))),n.a.createElement(s.b,{to:"/admin/users/".concat(t.id),className:"btn btn-dark btn-block"},"EDIT"))}})},de=function(e){var t=e.match.params.token,a=n.a.useState(!1),r=Object(f.a)(a,2),l=r[0],c=r[1],s=n.a.useState(!1),i=Object(f.a)(s,2),u=i[0],m=i[1];return u?n.a.createElement("h1",{style:{color:"white"}},u):l?n.a.createElement(o.a,{to:"/login"}):(window.Axios.get("/users/activate/".concat(t)).then((function(e){"success"===e.data.status?c(!0):m("Dieser Link ist verbraucht!")})),n.a.createElement("h1",{style:{color:"white"}},"Loading..."))},pe=function(e){var t=K(),a=n.a.useState(!1),r=Object(f.a)(a,2),l=r[0],c=r[1],i=n.a.useState({email:""}),o=Object(f.a)(i,2),u=o[0],m=o[1],d=function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.Axios.get("/users/reset/".concat(u.email));case 3:if(200!==e.sent.status){e.next=8;break}c("ok ist unterwegs"),e.next=9;break;case 8:throw new Error("Nicht m\xf6glich!");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:t.wrapper},n.a.createElement(k.a,{className:t.paper},l?n.a.createElement(k.a,{className:t.error},l.toString()):null,n.a.createElement(N.a,{label:"eMail",className:t.input,name:"email",value:u.email,onChange:function(e){return m(Object(E.a)(Object(E.a)({},u),{},Object(p.a)({},e.target.name,e.target.value)))}}),n.a.createElement("br",null),n.a.createElement(j.a,{style:{float:"right"},variant:"contained",color:"primary",onClick:d},"eMail senden"),n.a.createElement("br",null),"Schon Kunde? ",n.a.createElement(s.b,{to:"/login"},"Anmelden!"),n.a.createElement("br",null),"Noch kein Kunde? ",n.a.createElement(s.b,{to:"/register"},"Registrieren!"),n.a.createElement("br",null)))},Ee=function(e){var t=e.match,a=Object(o.g)(),r=K(),l=t.params.token,c=n.a.useState(!1),i=Object(f.a)(c,2),u=i[0],m=i[1],d=n.a.useState(!1),h=Object(f.a)(d,2),v=h[0],N=h[1],x=n.a.useState(!1),y=Object(f.a)(x,2),S=y[0],A=y[1],C=n.a.useState({password:"",confirmPassword:""}),P=Object(f.a)(C,2),R=P[0],B=P[1],F=R.password,M=R.confirmPassword;H.ValidatorForm.addValidationRule("isPasswordMatch",(function(e){return F===M}));var _=function(e){switch(B(Object(E.a)(Object(E.a)({},R),{},Object(p.a)({},e.target.name,e.target.value))),e.target.name){case"password":A(e.target.value===M);break;case"confirmPassword":A(F===e.target.value);break;default:A(F===M)}},I=function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,window.Axios.put("/users/changePassword/".concat(l),{password:T(R.password)});case 4:200===e.sent.status?a.push("/login"):N(new Error("Token ist ung\xfcltig!")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("@",e.t0),N(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:r.wrapper},n.a.createElement(k.a,{className:r.paper},n.a.createElement(H.ValidatorForm,{onSubmit:I,onError:function(e){return console.log(e)}},v?n.a.createElement(k.a,{className:r.error},v.toString()):null,n.a.createElement(H.TextValidator,{label:"Passwort",className:r.input,type:u?"text":"password",name:"password",value:R.password,onChange:_,validators:["required","matchRegexp:^[a-zA-Z0-9.!?:@ ]{10,64}$"],errorMessages:["this field is required","mindestens 10 zeichen, zahlen, grossbuchstaben, sonderzeichen"]}),n.a.createElement(H.TextValidator,{label:"Passwort Best\xe4tigen",className:r.input,type:u?"text":"password",name:"confirmPassword",value:R.confirmPassword,onChange:_,validators:["isPasswordMatch"],errorMessages:["Passw\xf6rter stimmen nicht \xfcberein"]}),n.a.createElement(w.a,{control:n.a.createElement(O.a,{checked:u,onChange:function(e){return m(!u)}}),label:"Passwort Zeigen"}),n.a.createElement("br",null),n.a.createElement(j.a,{disabled:!S,style:{float:"right"},variant:"contained",color:"primary",type:"submit"},"Speichern"),n.a.createElement("br",null),"Schon Kunde? ",n.a.createElement(s.b,{to:"/login"},"Anmelden!"),n.a.createElement("br",null),"Noch kein Kunde? ",n.a.createElement(s.b,{to:"/register"},"Registrieren!"),n.a.createElement("br",null))))};var he=function(){var e=n.a.useState(!1),t=Object(f.a)(e,2),a=t[0],r=t[1],l=n.a.useState(!1),c=Object(f.a)(l,2),i=c[0],o=c[1];return a||window.Axios.get("/records/?pageNumber=0&recordsPerPage=6&sortField=title&sortOrder=1&searchField=title&search=").then((function(e){r(!0),o(e.data)})),i?n.a.createElement(m.a,{className:"mt-3 p-2"},n.a.createElement(d.a,{className:"d-flex flex-wrap justify-content-center"},i.map((function(e){return n.a.createElement(W.a,{style:{width:"18rem"},key:e._id,className:"m-2 card-custom"},n.a.createElement(W.a.Img,{variant:"top",src:e.img}),n.a.createElement(W.a.Body,null,n.a.createElement(W.a.Title,null,n.a.createElement("h2",{className:"title"},e.title,n.a.createElement("br",null),"(",e.artist,")"))),n.a.createElement(W.a.Body,null,n.a.createElement(s.b,{className:"d-flex align-items-center",to:"/records/".concat(e._id)},n.a.createElement(G.a,{className:"btn btn-dark button-custom"},"Buy ",e.price,"\u20ac"))))})))):null},be=a(193),ge=a.n(be),fe=A((function(e){var t=e.basketActions,a=e.basket,r=a.total,l=a.records,c=a.authRequired,s=Object(o.g)();return 0===r?null:n.a.createElement(ee.a,{style:{position:"fixed",bottom:"10px",right:"10px",width:"fit-content",zIndex:"1"}},n.a.createElement(G.a,{onClick:function(e){c&&t.returnToBasket(),s.push("/basket")}},n.a.createElement(ge.a,null)),n.a.createElement(ee.a.Append,null,n.a.createElement(ee.a.Text,null,l),n.a.createElement(ee.a.Text,null,r.toFixed(2),"\u20ac")))})),ve=a(194),ke=a.n(ve),Ne=a(195),we=a.n(Ne),Oe=a(380),je=function(){var e=Object(g.a)(b.a.mark((function e(t,a,r,n){var l,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.verified){e.next=10;break}return l={quantity:0,records:[]},t.items.forEach((function(e){e.count;var t=e.product;l.quantity+=1,l.records.push(t._id)})),console.log("direkt zum paket",l),e.next=6,window.Axios.post("/orders/",l);case 6:200===(c=e.sent).status&&(console.log("bestellt",c),n.push("/thanks"),r.clear()),e.next=12;break;case 10:console.log("erstmal papierkram"),r.authRequired();case 12:case"end":return e.stop()}}),e)})));return function(t,a,r,n){return e.apply(this,arguments)}}(),xe=A((function(e){var t=e.basketActions,a=e.basket,r=a.total,l=(a.records,a.items),c=a.shippingFee,s=a.vat,i=a.authRequired,u=Object(v.d)((function(e){return e.auth})),m=Object(o.g)();return i?n.a.createElement(o.a,{to:"/login"}):n.a.createElement(Oe.a,{striped:!0,bordered:!0,hover:!0,style:{background:"#ffffffd1"}},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"#"),n.a.createElement("th",null,"Title"),n.a.createElement("th",null,"Artist"),n.a.createElement("th",null,"Price"),n.a.createElement("th",null,"Count"),n.a.createElement("th",null,"Sum"),n.a.createElement("th",null,"Actions"))),n.a.createElement("tbody",null,l.map((function(e,a){var r=e.count,l=e.product,c=l.title,s=l.artist,i=l.price;return n.a.createElement("tr",null,n.a.createElement("td",null,a+1),n.a.createElement("td",null,c),n.a.createElement("td",null,s),n.a.createElement("td",null,i.toFixed(2)),n.a.createElement("td",null,n.a.createElement(ee.a,null,n.a.createElement(ee.a.Prepend,null,n.a.createElement(G.a,{variant:"warning",onClick:function(e){return t.increment(a)}},"+"),n.a.createElement(ee.a.Text,null,r)),n.a.createElement(G.a,{variant:"warning",onClick:function(e){return t.decrement(a)}},"-"))),n.a.createElement("td",null,(r*i).toFixed(2)),n.a.createElement("td",null,n.a.createElement(G.a,{variant:"danger",onClick:function(e){return t.delete(a)}},n.a.createElement(ke.a,null))))}))),n.a.createElement("tfoot",null,n.a.createElement("tr",null,n.a.createElement("td",{colspan:4}),n.a.createElement("td",null,"Summe:"),n.a.createElement("td",null,r)),n.a.createElement("tr",null,n.a.createElement("td",{colspan:4}),n.a.createElement("td",null,"MwSt:"),n.a.createElement("td",null,s.toFixed(2))),n.a.createElement("tr",null,n.a.createElement("td",{colspan:4}),n.a.createElement("td",null,"Versandkosten:"),n.a.createElement("td",null,c.toFixed(2))),n.a.createElement("tr",null,n.a.createElement("td",{colspan:4}),n.a.createElement("td",null,"Total:"),n.a.createElement("td",null,(r+c).toFixed(2))),n.a.createElement("tr",null,n.a.createElement("td",{colspan:6}),n.a.createElement("td",null,n.a.createElement(G.a,{variant:"success",onClick:function(e){return je(a,u,t,m)}},n.a.createElement(we.a,null))))))})),ye=function(){var e=Object(o.g)(),t=n.a.useState(!1),a=Object(f.a)(t,2),r=a[0],l=a[1];return r||(l(!0),setTimeout((function(t){"/thanks"===window.location.pathname&&e.push("/")}),1e4)),n.a.createElement("div",null,n.a.createElement("h1",null,"Vielen Dank!"),n.a.createElement("p",null,"Sie haben uns finanziell echt aus der patsche geholfen...."),n.a.createElement("p",null,n.a.createElement(G.a,{onClick:function(t){return e.push("/orders")}},"Bestellungen")),n.a.createElement("p",null,n.a.createElement(G.a,{onClick:function(t){return e.push("/")}},"Zur Startseite")))};var Se=function(e){var t=e.restPath,a=void 0===t?"/orders/":t,r=e.linkPath,l=void 0===r?"/admin/orders/":r,c=["user","date"],i=c;return n.a.createElement(ae,{fieldNames:c,sortFields:i,restPath:a,renderListItem:function(e){return n.a.createElement(W.a,{style:{width:"18rem"},key:e._id,className:"m-2 card-custom"},n.a.createElement(W.a.Img,{variant:"top",src:ne.a}),n.a.createElement(W.a.Body,null,n.a.createElement(W.a.Title,null,n.a.createElement("h2",{className:"title"},e.totalRecords))),n.a.createElement(X.a,{className:"list-group-flush"},n.a.createElement($.a,{className:"list-group-item list-group-item-dark list-group-item-action"},e.user.email),n.a.createElement($.a,{className:"list-group-item list-group-item-dark list-group-item-action"},e.date),e.records.map((function(e,t){return n.a.createElement($.a,{className:"list-group-item list-group-item-dark list-group-item-action"},e.title)}))),n.a.createElement(W.a.Body,null,n.a.createElement(s.b,{className:"d-flex align-items-center",to:"".concat(l).concat(e._id)},n.a.createElement(G.a,{className:"btn btn-dark button-custom"},"View Order"))))}})},Ae=function(){return n.a.createElement(Se,{restPath:"/orders",linkPath:"/orders"})};var Ce=M((function(e){var t=e.match,a=(e.auth.token,t.params.id),r=Object(o.g)(),l=n.a.useState(!1),c=Object(f.a)(l,2),s=c[0],i=c[1],u=n.a.useState(!1),m=Object(f.a)(u,2),d=m[0],p=m[1];return s||(i(!0),window.Axios.get("/orders/".concat(a)).then((function(e){return p(e.data)}))),d?d&&d.error?n.a.createElement("h1",null,"ouch"):n.a.createElement(W.a,{style:{width:"18rem"},key:d._id,className:"m-2 card-custom"},n.a.createElement(W.a.Img,{variant:"top",src:ne.a}),n.a.createElement(W.a.Body,null,n.a.createElement(W.a.Title,null,n.a.createElement("h2",{className:"title"},d.totalRecords))),n.a.createElement(X.a,{className:"list-group-flush"},n.a.createElement($.a,{className:"list-group-item list-group-item-dark list-group-item-action"},d.user.email),n.a.createElement($.a,{className:"list-group-item list-group-item-dark list-group-item-action"},d.date),d.records.map((function(e,t){return n.a.createElement($.a,{className:"list-group-item list-group-item-dark list-group-item-action"},e.title," ",d.quantity[t],"x")}))),n.a.createElement(W.a.Body,null,n.a.createElement(G.a,{onClick:function(e){return r.goBack()},className:"btn btn-dark button-custom"},"Close"))):null}));var Pe=M((function(e){var t=e.match,a=(e.auth.token,t.params.id),r=Object(o.g)(),l=n.a.useState(!1),c=Object(f.a)(l,2),s=c[0],i=c[1],u=n.a.useState(!1),m=Object(f.a)(u,2),d=m[0],p=m[1];return s||(i(!0),window.Axios.get("/orders/".concat(a)).then((function(e){return p(e.data)}))),d?d&&d.error?n.a.createElement("h1",null,"ouch"):n.a.createElement(W.a,{style:{width:"18rem"},key:d._id,className:"m-2 card-custom"},n.a.createElement(W.a.Img,{variant:"top",src:ne.a}),n.a.createElement(W.a.Body,null,n.a.createElement(W.a.Title,null,n.a.createElement("h2",{className:"title"},d.totalRecords))),n.a.createElement(X.a,{className:"list-group-flush"},n.a.createElement($.a,{className:"list-group-item list-group-item-dark list-group-item-action"},d.user.email),n.a.createElement($.a,{className:"list-group-item list-group-item-dark list-group-item-action"},d.date),d.record.map((function(e,t){return n.a.createElement($.a,{className:"list-group-item list-group-item-dark list-group-item-action"},e.title," ",d.quantity[t],"x")}))),n.a.createElement(W.a.Body,null,n.a.createElement(G.a,{onClick:function(e){e.preventDefault(),window.Axios.put("/orders/toggle/".concat(a),d).then((function(e){if(200!==e.status)return r.push("/login"),!1;p(e.data)}))},className:"btn btn-dark button-custom"},d.isOpen?"Close Order":"Reopen"))):null}));var Te,Re=M((function(e){var t=e.auth,a=(e.authActions,t.user);return a.firstName,a.lastName,n.a.createElement(u.a,{fluid:!0,className:"bg-container"},n.a.createElement("div",{className:"backdrop"},"\xa0"),n.a.createElement(m.a,{className:"row-custom"},n.a.createElement(d.a,{className:"d-flex flex-row justify-content-center"},n.a.createElement(s.b,{className:"link",to:"/"},n.a.createElement("div",{className:"link col-custom"},"Home")),n.a.createElement(_,null,n.a.createElement(s.b,{className:"link",to:"/admin/records/"},n.a.createElement("div",{className:"link col-custom"},"Records")),n.a.createElement(s.b,{className:"link",to:"/admin/users/"},n.a.createElement("div",{className:"link col-custom"},"Users")),n.a.createElement(s.b,{className:"link",to:"/admin/orders/"},n.a.createElement("div",{className:"link col-custom"},"Orders"))),n.a.createElement(V,null,n.a.createElement(s.b,{className:"link",to:"/login"},n.a.createElement("div",{className:"link col-custom"},"Anmelden")),n.a.createElement(s.b,{className:"link",to:"/register"},n.a.createElement("div",{className:"link col-custom"},"Registrieren"))),n.a.createElement(I,null,n.a.createElement(s.b,{className:"link",to:"/orders"},n.a.createElement("div",{className:"link col-custom"},"Bestellungen")),n.a.createElement(s.b,{className:"link",to:"/logout"},n.a.createElement("div",{className:"link col-custom"},"Abmelden"))))),n.a.createElement(fe,null),n.a.createElement(o.d,null,n.a.createElement(o.b,{path:"/login",component:Z}),n.a.createElement(o.b,{path:"/logout",component:D}),n.a.createElement(o.b,{path:"/register",component:J}),n.a.createElement(o.b,{path:"/reset/:token",component:Ee}),n.a.createElement(o.b,{path:"/reset",component:pe}),n.a.createElement(o.b,{path:"/activate/:token",component:de}),n.a.createElement(z,{path:"/admin/orders/:id",component:Pe}),n.a.createElement(z,{path:"/admin/orders/",component:Se}),n.a.createElement(z,{path:"/admin/records/:id",component:ce}),n.a.createElement(z,{path:"/admin/records/",component:le}),n.a.createElement(z,{path:"/admin/users/:id",component:ue}),n.a.createElement(z,{path:"/admin/users/",component:me}),n.a.createElement(L,{path:"/orders/:id",component:Ce}),n.a.createElement(L,{path:"/orders",component:Ae}),n.a.createElement(L,{path:"/thanks",component:ye}),n.a.createElement(o.b,{path:"/basket",component:xe}),n.a.createElement(o.b,{path:"/records/:id",component:ie}),n.a.createElement(o.b,{path:"/",component:he})))})),Be=a(73),Fe=Object(Be.c)(Object(Be.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth:logout":return Object(E.a)(Object(E.a)({},e),{},{user:!1,token:null,verified:!1,remember:!1});case"auth:login:success":var a=t.user,r=t.token,n=t.remember;return Object(E.a)(Object(E.a)({},e),{},{user:a,token:r,remember:n,verified:!0})}return e},basket:function(e,t){var a,r,n;e||(e=Object(E.a)({},y));var l,c=t.index;switch(t.type){case"b/add":r=t.product,n=t.count;var s=e.items.find((function(e){return e.product._id===r._id}));s?(c=e.items.indexOf(s),(a=e.items.slice())[c]={count:s.count+n,product:r},e=Object(E.a)(Object(E.a)({},e),{},{items:a})):e=Object(E.a)(Object(E.a)({},e),{},{items:[].concat(Object(x.a)(e.items),[{product:r,count:n}])});break;case"b/delete":(a=e.items.slice()).splice(c,1),e=Object(E.a)(Object(E.a)({},e),{},{items:a});break;case"b/increment":var i=e.items[c];r=i.product,n=i.count,(a=e.items.slice())[c]={count:Math.min(10,n+1),product:r},e=Object(E.a)(Object(E.a)({},e),{},{items:a});break;case"b/decrement":var o=e.items[c];r=o.product,n=o.count,(a=e.items.slice())[c]={count:Math.max(1,n-1),product:r},e=Object(E.a)(Object(E.a)({},e),{},{items:a});break;case"b/clear":e=Object(E.a)({},y);break;case"b/authRequired":e=Object(E.a)(Object(E.a)({},e),{},{authRequired:!0});break;case"b/returnToBasket":e=Object(E.a)(Object(E.a)({},e),{},{authRequired:!1});break;default:return e}return(l=e).total=0,l.records=0,l.weight=0,l.items.forEach((function(e){l.total+=e.product.price*e.count,l.records+=e.count,l.weight+=.04*e.count})),l.vat=l.total/1.19*.19,l.shippingFee=4.75*Math.ceil(l.records/10),l.total>100&&(l.shippingFee*=.5),l}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Fe.subscribe((Te=Fe,function(){var e=Te.getState().auth,t=e.remember,a=e.token,r=e.user;t?window.localStorage.setItem("record-shop-auth-data",JSON.stringify({user:r,token:a})):(window.localStorage.removeItem("record-shop-auth-data"),window.sessionStorage.setItem("record-shop-auth-data",JSON.stringify({user:r,token:a}))),B.a.defaults.headers.common["x-auth"]=a,window.AUTH_TOKEN=a,window.USER=r}));var Me=Fe;c.a.render(n.a.createElement(v.a,{store:Me},n.a.createElement(s.a,null,n.a.createElement(q,null),n.a.createElement(i.a,null),n.a.createElement(Re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[206,1,2]]]);
//# sourceMappingURL=main.15524b7e.chunk.js.map